source("C:/Users/Zhang/OneDrive/Documents/Fall-2024 Semester/UROP/TumorDataModel_Reimp.R", echo=TRUE)
testdf = runsim(tcell_df)
testdf = run_sim(tcell_df)
source("C:/Users/Zhang/OneDrive/Documents/Fall-2024 Semester/UROP/TumorDataModel_Reimp.R", echo=TRUE)
testdf = run_sim(tcell_df)
run_sim <- function(agents){
for (i in 1:iterations){
previous_frame <- max(agents$frame)
next_frame <- previous_frame + 1
if (next_frame <= iterations){
previous_frame_agents <- agents[agents$frame == previous_frame,]
next_frame_agents <- data.frame(matrix(ncol = length(column_names), nrow = 0))
colnames(next_frame_agents) <- column_names
for (id in 1:num_tcells){
previous_frame_agent <- previous_frame_agents[previous_frame_agents$id == id,]
previous_pos_x <- previous_frame_agent$x_pos
# Get concentration to right
previous_pos_x_right <- get_new_torus_pos(previous_pos_x, step_size)
print(previous_pos_x_right)
previous_sum_conc_right <- chemokine_gradient$concentration[chemokine_gradient$x_pos == previous_pos_x_right]
# Get concentration to left
previous_pos_x_left <- get_new_torus_pos(previous_pos_x, -1*step_size)
previous_sum_conc_left <- chemokine_gradient$concentration[chemokine_gradient$x_pos == previous_pos_x_left]
delta_x <- get_next_step(previous_sum_conc_left, previous_sum_conc_right)
new_pos_x = get_new_torus_pos(previous_pos_x, delta_x)
next_agent <- data.frame(
id = id,
frame = next_frame,
pos_x = new_pos_x,
pos_y = chemokine_gradient$concentration[chemokine_gradient$x_pos == new_pos_x]
)
next_frame_agents <- rbind(next_frame_agents, next_agent)
}
agents <- rbind(agents, next_frame_agents)
}
}
return(agents)
}
test_df = run_sim(tcell_df)
source("C:/Users/Zhang/OneDrive/Documents/Fall-2024 Semester/UROP/TumorDataModel_Reimp.R", echo=TRUE)
View(cancer_pos)
View(chemokine_gradient)
View(cold_data)
View(hot_data)
View(tcell_df)
test_df = run_sim(tcell_df)
View(tcell_df)
source("C:/Users/Zhang/OneDrive/Documents/Fall-2024 Semester/UROP/TumorDataModel_Reimp.R", echo=TRUE)
test_df = run_sim(tcell_df)
View(test_df)
source("C:/Users/Zhang/OneDrive/Documents/Fall-2024 Semester/UROP/TumorDataModel_Reimp.R", echo=TRUE)
install.packages("gganimate")
install.packages("av")
source("C:/Users/Zhang/OneDrive/Documents/Fall-2024 Semester/UROP/TumorDataModel_Reimp.R", echo=TRUE)
test_df = run_sim(tcell_df)
makePlotAtFrame(test_df, chemokine_gradient, 401)
